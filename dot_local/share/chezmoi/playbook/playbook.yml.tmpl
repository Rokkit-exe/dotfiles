- name: Configure Arch machine via roles
  hosts: localhost
  gather_facts: false
  become: true
  vars:
    device: "{{ .device }}"
    de: "{{ .de }}"

  pre_tasks:
    - name: Upgrade system (equivalent to pacman -Syu)
      ansible.builtin.pacman:
        update_cache: true
        upgrade: true

  roles:
    - role: common
    - { role: hyprland, when: de == "hyprland", tags: ["hyprland","desktop"] }
    - { role: plasma,   when: de == "plasma",   tags: ["plasma","laptop"] }

